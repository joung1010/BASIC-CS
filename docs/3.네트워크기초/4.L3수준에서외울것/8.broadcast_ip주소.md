## Broadcast IP 주소

### IP 브로드캐스트 주소의 구조

```
브로드캐스트 주소 구성:

192        .168     .0       .255
1100 0000 1010 1000 0000 0000 1111 1111
1111 1111 1111 1111 1111 1111 0000 0000 (서브넷 마스크)
│                                 │
└─── Network ID ──────────────────┘ Host ID (모두 1)
```

**앞서 MAC 주소에서 언급했던 것처럼 MAC 주소는 48bit 체계에서 FF-FF-FF~~ 이런 식의 구조를 가지고 있는 것이 브로드캐스트라고 했는데 IP도 똑같습니다. 지금 여기 끝자리가 보면 255로 표현되어 있습니다. 이것을 이진수로 표현하면 1111 1111 전부 다 1인 것입니다. 그니까 FF인 것입니다.**

### 브로드캐스트 주소 생성 원리

**이 네트워크 ID를 제외하고 Host ID 부분을 전부 다 1로 채우게 되면 이것은 이 네트워크 192.168.0번을 쓰는 네트워크에서 브로드캐스트로 사용됩니다.**

```
브로드캐스트 주소 계산:

네트워크 주소: 192.168.0.0/24
서브넷 마스크: 255.255.255.0

브로드캐스트 주소 계산 과정:
1. 서브넷 마스크 반전 (NOT 연산):
   255.255.255.0 → 0.0.0.255
   
2. 네트워크 주소와 OR 연산:
   192.168.0.0 | 0.0.0.255 = 192.168.0.255

이진수로 확인:
네트워크:   11000000.10101000.00000000.00000000
반전 마스크: 00000000.00000000.00000000.11111111
OR 결과:    11000000.10101000.00000000.11111111
          = 192.168.0.255

다양한 서브넷 크기별 브로드캐스트:
┌─────────────────┬──────────────┬─────────────────┐
│ 네트워크        │ 서브넷 마스크│ 브로드캐스트   │
├─────────────────┼──────────────┼─────────────────┤
│ 192.168.0.0/24  │ /24          │ 192.168.0.255   │
│ 192.168.0.0/25  │ /25          │ 192.168.0.127   │
│ 192.168.0.128/25│ /25          │ 192.168.0.255   │
│ 10.0.0.0/8      │ /8           │ 10.255.255.255  │
│ 172.16.0.0/16   │ /16          │ 172.16.255.255  │
└─────────────────┴──────────────┴─────────────────┘
```

### 브로드캐스트의 효율성 문제

**그래서 브로드캐스트는 전체한테 데이터를 송신하는 것이기 때문에 거듭 언급하지만 효율이 안 좋습니다.**

**물론 브로드캐스트를 실행하는 쪽에서는 반드시 수행해야 하기 때문에 하는 것이지만 이를 일정 수준으로 제한하는 것이 좋고 너무 많이 하게 되면 네트워크 장비에 많은 부담이 됩니다.**

```
브로드캐스트의 영향과 문제점:

네트워크 성능 영향:
┌─────────────────────────────────────────┐
│ 하나의 브로드캐스트 패킷                │
│         ↓                               │
│ 네트워크 내 모든 기기가 수신            │
│         ↓                               │
│ 각 기기의 CPU에서 처리 필요             │
│         ↓                               │
│ 불필요한 리소스 소모                    │
└─────────────────────────────────────────┘

브로드캐스트 스톰 시나리오:
1. 네트워크 루프 발생
2. 브로드캐스트 패킷이 무한 순환
3. 대역폭 100% 점유
4. 정상 통신 불가능
5. 네트워크 마비

대표적인 브로드캐스트 사용 사례:
- ARP (Address Resolution Protocol): IP→MAC 변환
- DHCP Discover: IP 주소 요청
- Wake-on-LAN: 원격 부팅
- NetBIOS Name Resolution: Windows 네트워크
- RIP 라우팅 업데이트
```

### 사용할 수 없는 IP 주소

**그래서 네트워크상에서 쓸 수 없는 IP 주소가 있는데 예를 들어 192.168.0.0번 즉 호스트 ID가 0인 경우는 서브넷 마스크 결과와 동일하게 되기 때문에 쓸 수 없습니다. 그리고 255번이 되면 브로드캐스트가 되기 때문에 사용할 수 없습니다.**

### 예약된 주소의 종류

```
192.168.0.0/24 네트워크에서 예약된 주소:

┌─────────────────┬─────────────────┬───────────────────┐
│ IP 주소         │ 용도           │ 사용 가능 여부   │
├─────────────────┼─────────────────┼───────────────────┤
│ 192.168.0.0     │ 네트워크 주소   │ ❌ 사용 불가      │
│ 192.168.0.1     │ 게이트웨이     │ ⚠️ 일반적으로 예약 │
│ 192.168.0.2     │ 일반 호스트     │ ✅ 사용 가능      │
│ ...             │ ...            │ ✅ 사용 가능      │
│ 192.168.0.254   │ 일반 호스트     │ ✅ 사용 가능      │
│ 192.168.0.255   │ 브로드캐스트   │ ❌ 사용 불가      │
└─────────────────┴─────────────────┴───────────────────┘

호스트 ID = 0 (네트워크 주소):
192.168.0.0 = 네트워크 자체를 나타냄
- 라우팅 테이블에서 네트워크 식별용
- 실제 기기에 할당 불가

호스트 ID = 모든 비트 1 (브로드캐스트 주소):  
192.168.0.255 = 네트워크 내 모든 기기 대상
- 동시에 모든 기기에게 전송
- 특정 기기에 할당 불가
```

### 실제 사용 가능한 IP 주소 계산

**그래서 IP 주소는 8비트 체계로 호스트 ID가 사용할 수 있는 수의 경우의 수는 256개의 경우의 수가 있지만 이 중에서 0과 255를 제외한 254개만 사용할 수 있습니다.**

**그리고 여기서 gateway 주소도 빼줘야 합니다(보통 1번을 사용). 그래서 사실상 네트워크 장비를 제외하고 250개 정도 사용할 수 있습니다.**

```
/24 네트워크의 주소 할당:

전체 주소 공간: 2⁸ = 256개 (0~255)

예약된 주소:
- 192.168.0.0   (네트워크 주소)     -1
- 192.168.0.255 (브로드캐스트 주소) -1
- 192.168.0.1   (게이트웨이)        -1
- 192.168.0.2   (DNS 서버)          -1 (선택적)
- 192.168.0.3   (DHCP 서버)         -1 (선택적)

실제 사용 가능: 256 - 5 = 251개

다양한 서브넷 크기별 사용 가능 주소:
┌─────────┬──────────┬─────────┬──────────┬─────────────┐
│서브넷   │전체 주소 │예약 주소│기본 예약 │사용 가능   │
├─────────┼──────────┼─────────┼──────────┼─────────────┤
│ /30     │    4     │    2    │    2     │     0       │
│ /29     │    8     │    2    │    2     │     4       │
│ /28     │   16     │    2    │    2     │    12       │
│ /27     │   32     │    2    │    2     │    28       │
│ /26     │   64     │    2    │    2     │    60       │
│ /25     │  128     │    2    │    2     │   124       │
│ /24     │  256     │    2    │    3     │   251       │
└─────────┴──────────┴─────────┴──────────┴─────────────┘

Point-to-Point 링크 (/30):
네트워크:    192.168.1.0
사용 가능:   192.168.1.1 ↔ 192.168.1.2  
브로드캐스트: 192.168.1.3
→ 라우터 간 연결에 최적
```

### 실무에서의 IP 주소 관리

```
기업 네트워크 IP 할당 전략:

192.168.0.0/24 네트워크 예시:
┌─────────────────────────────────────────┐
│ 인프라 영역 (192.168.0.1~50)           │
│ • 게이트웨이: 192.168.0.1               │
│ • DNS 서버: 192.168.0.2                 │
│ • DHCP 서버: 192.168.0.3                │
│ • 프린터: 192.168.0.10~20               │
│ • 서버: 192.168.0.21~50                 │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│ DHCP 풀 (192.168.0.100~200)            │
│ • 동적 할당용                           │
│ • 임시 기기, 게스트                     │
│ • 자동 관리                             │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│ 고정 IP 영역 (192.168.0.201~254)       │
│ • 중요 워크스테이션                     │
│ • 특수 장비                             │
│ • 수동 관리                             │
└─────────────────────────────────────────┘

DHCP 설정 예시:
network 192.168.0.0 netmask 255.255.255.0;
range 192.168.0.100 192.168.0.200;
option routers 192.168.0.1;
option domain-name-servers 192.168.0.2;
option broadcast-address 192.168.0.255;
```

### 브로드캐스트 도메인 관리

```
브로드캐스트 도메인 분할:

단일 브로드캐스트 도메인 (문제):
┌─────────────────────────────────────────┐
│ 192.168.0.0/24 (256개 호스트)          │
│ 모든 기기가 하나의 브로드캐스트 수신    │
│ → 성능 저하, 보안 문제                  │
└─────────────────────────────────────────┘

VLAN으로 분할 (개선):
┌─────────────────────────────────────────┐
│ VLAN 10: 192.168.10.0/24 (관리팀)      │
│ VLAN 20: 192.168.20.0/24 (개발팀)      │
│ VLAN 30: 192.168.30.0/24 (영업팀)      │
│ → 각각 독립된 브로드캐스트 도메인       │
└─────────────────────────────────────────┘

서브넷으로 분할 (물리적 분리):
┌─────────────────────────────────────────┐
│ 본사: 192.168.0.0/24                   │
│ 지사A: 192.168.1.0/24                  │
│ 지사B: 192.168.2.0/24                  │
│ → 라우터로 연결, 브로드캐스트 격리      │
└─────────────────────────────────────────┘

장점:
- 브로드캐스트 트래픽 격리
- 보안 강화 (부서별 분리)
- 네트워크 성능 향상
- 장애 영향 범위 제한
```

### 브로드캐스트 관련 보안 고려사항

```
브로드캐스트 보안 이슈:

1. 정보 누출:
- 브로드캐스트 패킷은 모든 기기가 수신
- 스니핑 공격에 취약
- 민감한 정보 노출 가능

2. DoS 공격:
- 대량 브로드캐스트로 네트워크 마비
- Smurf 공격: 위조된 출발지로 ICMP 브로드캐스트
- 증폭 공격에 악용 가능

3. 대책:
- 브로드캐스트 레이트 제한
- VLAN 분할로 영향 범위 축소
- 불필요한 브로드캐스트 서비스 비활성화
- 스위치 포트 보안 설정

스위치 설정 예시:
interface FastEthernet0/1
 storm-control broadcast level 10.00
 storm-control action shutdown
 ! 브로드캐스트 10% 초과 시 포트 차단
```

이렇게 **브로드캐스트 IP 주소의 구조와 제약사항을 이해**하면, **효율적인 네트워크 설계와 IP 주소 관리**를 수행할 수 있고, **브로드캐스트로 인한 성능 문제나 보안 이슈를 예방**할 수 있습니다!