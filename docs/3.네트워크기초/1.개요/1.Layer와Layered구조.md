## Layer와 Layered 구조

### 계층적 구조의 시각적 표현

```
┌─────────────────┐
│     Layer 4     │  ← 최상위 계층
├─────────────────┤
│     Layer 3     │  
├─────────────────┤
│     Layer 2     │  
├─────────────────┤
│     Layer 1     │  ← 최하위 계층
└─────────────────┘

의존성 방향: ↓ (위에서 아래로)
```

이 계층적 구조에서 **위에 네모 박스 하나가 요소**라고 보면 됩니다. IT에서 이런 요소들을 굳이 위처럼 층을 져서 계층적으로 표현하는 이유는 **무엇인가를 이루고 있는 구성요소가 있고 이 구성요소들 간의 관계를 표현하기 위해서**입니다.

### IT에서의 설계 본질

**IT 쪽에서 설계라고 하는 것은 큰 틀로 봤을 때 특정 목표(시스템)에 대해 요소가 무엇인지를 정의하고 그 요소들 간에 관계를 규정하는 것이 설계**입니다.

### 의존성의 단계별 이해

```
┌─────────────────┐
│     Layer 4     │ ← 3층에 의존적
├─────────────────┤    ↓
│     Layer 3     │ ← 4층의 전제 조건
├─────────────────┤
│     Layer 2     │
├─────────────────┤
│     Layer 1     │
└─────────────────┘
```

레이어드 관계에서 **4층은 3층에 의존적**입니다. 이때 **의존적이라는 표현에도 범위가 존재**하는데:

### 1. 기능적 의존성

**어떤 행위나 기능에 대한 의존**일 수 있습니다.

- 예시: 출근할 때 교통수단을 이용해서 회사를 갈 때, 지하철이라는 교통수단은 출근을 하는 행위에 대해서 의존적입니다.

### 2. 존립적 의존성

**의존의 수준이 심하면 존립에 대해서 의존적**일 수도 있습니다.

- **4는 3에 대해서 3이 없으면 4는 존재할 수 없습니다**
- 예시: 만약 내가 학사 학위가 있다면 당연히 고등학교, 중학교를 졸업했다는 걸 전제합니다

### 레이어드 구조의 핵심 원리

**IT에서 레이어드 구조가 나왔다 하면 존립이 의존적이라고 생각하면 됩니다.**

상위 레이어 존재 → 하위 레이어 존재 보장
하위 레이어 = 상위 레이어의 전제 조건

Layer 4 존재 ⟸ Layer 3 존재 (필수)
Layer 3 존재 ⟸ Layer 2 존재 (필수)  
Layer 2 존재 ⟸ Layer 1 존재 (필수)

그래서 **3은 4에 대한 전제 조건**이 됩니다.

## 버퍼(Buffer)의 개념

### 버퍼의 기본 정의

```
┌─────────────────────────────────┐
│          메모리 공간             │
│  ┌─────┬─────┬─────┬─────┐     │
│  │     │     │     │     │     │  ← 빈 공간
│  └─────┴─────┴─────┴─────┘     │
│                                 │
│           ↓ (버퍼링)            │
│                                 │
│  ┌─────┬─────┬─────┬─────┐     │
│  │ 데이터│ 데이터│ 데이터│     │     │  ← 채워진 상태
│  └─────┴─────┴─────┴─────┘     │
└─────────────────────────────────┘
```

**버퍼란 특정 메모리 공간이 존재하고 해당 공간을 채우는 행위를 버퍼링이라고 합니다.** 우리가 동영상을 볼 때 중간에 멈춰서 버퍼링이 걸리는 것이 바로 이것입니다!

### 버퍼링이 발생하는 이유

데이터 공급 속도 vs 데이터 처리 속도

공급 속도 < 처리 속도 → 버퍼가 비워짐 → 버퍼링 발생
공급 속도 > 처리 속도 → 버퍼가 가득참 → 대기 발생
공급 속도 = 처리 속도 → 원활한 처리

동영상 스트리밍에서 버퍼링이 걸리는 것은 **네트워크를 통해 데이터를 받아오는 속도보다 동영상을 재생하는 속도가 더 빨라서** 버퍼(임시 저장 공간)가 비워지기 때문입니다.

### 설계에서의 버퍼 활용

버퍼는 단순한 저장 공간이 아니라 **시스템 설계에서 속도 차이를 해결하는 핵심 요소**입니다:

1. **속도 불일치 해결**: 서로 다른 처리 속도를 가진 구성 요소들 사이의 중재자 역할
2. **안정성 확보**: 일시적인 데이터 과부하 상황에서 시스템 보호
3. **효율성 향상**: 데이터를 모아서 한 번에 처리하여 전체 성능 개선

### 레이어드 구조의 장점

1. **복잡성 분할**: 거대한 시스템을 이해 가능한 단위로 나눔
2. **명확한 책임**: 각 레이어마다 고유한 역할 부여
3. **변경 영향 최소화**: 한 레이어 변경이 다른 레이어에 미치는 영향 제한
4. **재사용성**: 각 레이어를 독립적으로 개발하고 재활용 가능

이런 레이어드 구조와 버퍼 개념은 소프트웨어 아키텍처, 하드웨어 설계, 조직 구조 등에서 복잡한 시스템을 체계적으로 관리하기 위한 핵심 설계 원칙입니다.