### LAN과 WAN의 경계 그리고 Broadcast

### Broadcast의 기본 개념과 문제점

**Broadcast를 그대로 번역하면 방송입니다. Broadcast address는 방송 주소입니다. 일단 앞서 이 브로드캐스팅이라는 것은 효율과는 거리가 멉니다. 그리고 이 브로드캐스트의 반대말은 unicast, 즉 어느 한 곳을 지정하고 말하는 것입니다.**

### 브로드캐스트의 비유적 이해

**만약 어떤 두 사람이 매우 조용히 대화를 하고 있다면, 이때 그 주변 사람들은 그 둘의 대화를 들을 수 없을 것입니다. 이때 두 사람의 대화를 다른 사람이 듣는다면 별 흥미도 없고 만약 하는 일이 있다면 오히려 집중에 방해가 될 수 있습니다. 이와 같이 브로드캐스트는 시끄러움입니다.**

```
통신 방식 비교:

Unicast (일대일 통신):
A ────(조용한 대화)──── B
- 효율적, 타겟팅된 통신
- 다른 기기들은 영향 없음
- 네트워크 자원 절약

Broadcast (일대전체 통신):  
      ┌─── C (관심없어도 받음)
      │
A ────┼─── D (업무 방해)
      │  
      └─── E (불필요한 처리)

- 모든 기기가 강제로 수신
- 네트워크 전체 성능 저하
- 꼭 필요한 경우에만 사용
```

### 네트워크에서의 Broadcast 정의와 추가 설명

```
네트워크 Broadcast의 종류:

1. Physical Broadcast (L1):
- 허브 환경에서 전기적 신호가 모든 포트로 전파
- 충돌 도메인 내 모든 기기가 수신

2. Data Link Broadcast (L2):  
- 스위치 환경에서 MAC 주소 기반
- MAC Table에 없는 주소는 모든 포트로 플러딩
- 브로드캐스트 도메인 내 전파

3. Network Broadcast (L3):
- IP 브로드캐스트 (예: 192.168.1.255)
- 서브넷 내 모든 호스트에게 전달
- DHCP, ARP 등에서 활용

4. Application Broadcast:
- 멀티캐스트, 애니캐스트 등
- 특정 그룹이나 서비스 대상
```

### Broadcast Address의 구조

**그래서 이 브로드캐스트는 꼭 필요한 곳에서만 사용해야 하는 매우 제한적인 통신 방법입니다. 그래서 Broadcast는 범위를 매우 중요하게 고려해야 하며 Broadcast Address라는 매우 특별한 주소가 존재합니다(MAC, IP 모두 존재). 이 주소가 기본적으로 이진수로 전부 1로 이루어져 있으면 그게 브로드캐스팅입니다.**

### MAC 브로드캐스트 주소

**예를 들어 MAC 주소의 경우 브로드캐스트 48비트 주소 체계를 사용하고 있습니다.**

```
MAC 브로드캐스트 주소:
FF:FF:FF:FF:FF:FF

이진수 표현:
FF → 1111 1111 (8비트)
FF-FF-FF-FF-FF-FF → 48비트 모두 1

동작 방식:
출발지 MAC: 12:34:56:78:9A:BC  
목적지 MAC: FF:FF:FF:FF:FF:FF ← 브로드캐스트
→ 스위치가 모든 포트로 전달
```

### AND 연산과 마스크의 역사적 배경

**주소는 기본적으로 출발지가 있을 것이고 거기에 목적지가 있을 것입니다. 이때 목적지 주소가 위와 같다 즉, 브로드캐스트이면 전부 다 받으라는 의미입니다. 이 네트워크가 처음 개발할 당시에는 AND 연산밖에 존재하지 않아서 연산이 AND 마스크를 사용하였는데, 위와 같이 모든 것이 1로 이루어져 있으면 모든 경우에 해당된다는 의미를 가집니다.**

```
초기 컴퓨터의 AND 연산 중심 설계:

AND 연산 특성:
1 AND 1 = 1
1 AND 0 = 0  
0 AND 1 = 0
0 AND 0 = 0

마스킹 활용:
원본 주소: 1010 1100
마스크:    1111 1111 (모두 1)
결과:      1010 1100 (원본 그대로)

마스크:    0000 0000 (모두 0)  
결과:      0000 0000 (모두 차단)

브로드캐스트 설계 철학:
- 모든 비트가 1 = 모든 조건 만족
- 하드웨어 구현 단순화
- 범용성과 확장성 확보
```

### 브로드캐스트의 네트워크 영향

### LAN 환경에서의 브로드캐스트 전파

```
계층적 네트워크에서 브로드캐스트 전파:

                    ┌─────────┐
                    │ Router  │ ← 브로드캐스트 차단!
                    │   L3    │   (브로드캐스트 도메인 경계)
                    └────┬────┘
                         │
                    ┌────▼────┐
                    │L2 Dist  │ ← 브로드캐스트 전달
                    │ Switch  │   
                    └────┬────┘
              ┌──────────┼──────────┐
              │          │          │ 브로드캐스트
         ┌────▼────┐┌────▼────┐┌────▼────┐ 확산
         │L2 Access││L2 Access││L2 Access│
         │ Switch  ││ Switch  ││ Switch  │   
         └────┬────┘└────┬────┘└────┬────┘
              │          │          │
          ┌───▼───┐  ┌───▼───┐  ┌───▼───┐
          │  PC   │  │  PC   │  │  PC   │ ← 모두 수신!
          └───────┘  └───────┘  └───────┘
```

**그래서 이러한 LAN 환경에서 특정 PC 한 대에서 브로드캐스팅을 하게 되면 해당 데이터가 L2 Switch를 걸쳐 Distribution 스위치에서 다른 L2 스위치로, 즉 전체로 퍼져나가는데 이때 브로드캐스팅 중에는 다른 PC들은 네트워크 통신을 할 수 없게 됩니다.**

### 브로드캐스트의 성능 영향

**즉 전체 네트워크에서 한 곳에서 브로드캐스팅을 하게 된다면 다른 곳에서 브로드캐스트 통신이 끝날 때까지 통신을 할 수 없습니다.**

```
브로드캐스트 스톰 시나리오:

시간: T0 (정상 상태)
PC1 ──unicast── PC2 (정상 통신)
PC3 ──unicast── PC4 (정상 통신)

시간: T1 (브로드캐스트 발생)
PC1 ──BROADCAST────┐
                   ├──→ 모든 PC
                   └──→ 네트워크 포화

시간: T2 (네트워크 마비)
PC2: "통신 안됨" 
PC3: "응답 없음"
PC4: "연결 끊어짐"

복구: T3 (브로드캐스트 종료)
다시 정상 unicast 통신 재개

성능 영향:
- 대역폭 100% 점유
- 모든 기기 CPU 부하 증가  
- 정상 트래픽 지연/차단
- 네트워크 응답성 저하
```

### Frame 구조와 주소 체계

### L2 Frame의 구조

**이러한 이유 때문에 브로드캐스트는 최소화시키는 것이 좋고 LAN에서 보내는 데이터 단위 Frame은 위와 같이 헤더에 출발지 주소와 목적지 주소를 가지고 있습니다. 마치 택배의 송장과 같습니다.**

```
이더넷 프레임 구조:
┌─────────────────┬─────────────────┬──────┬─────────┬─────┐
│ 목적지 MAC      │ 출발지 MAC      │ Type │ Payload │ FCS │
│ (6 bytes)       │ (6 bytes)       │(2 bytes)│(46-1500)│(4 bytes)│
└─────────────────┴─────────────────┴──────┴─────────┴─────┘

택배 송장과의 비교:
택배 송장              │ 이더넷 프레임
──────────────────────┼────────────────
받는 사람 주소         │ 목적지 MAC 주소  
보내는 사람 주소       │ 출발지 MAC 주소
물건 종류             │ Type 필드
실제 물건             │ Payload (데이터)
바코드/검증           │ FCS (오류 검출)
```

**그래서 이러한 데이터를 실어 나르는 어떠한 전송 단위에는 출발지 주소와 목적지 주소를 가지고 있습니다. 근데 이때 목적지 주소를 모두 1로 하게 되면 그게 브로드캐스트이고 내부적으로 여러 곳에 데이터를 전달하게 됩니다.**

### 브로드캐스트 관리의 딜레마

**그래서 이를 잘못 사용하게 되면 순간적으로 네트워크 속도가 현저하게 느려지게 됩니다. 그래서 이를 관리하기 위해서 특정 범위까지만 지정하고 브로드캐스팅이 그 범위 밖으로 못 나가게 막아서 성능을 최적화할 수 있지만 반대로 꼭 필요한 경우 전체적으로 통신이 되지 않아 문제가 발생할 수 있습니다.**

```
브로드캐스트 관리 방식:

1. VLAN 분할로 브로드캐스트 도메인 축소:
┌────────────────┬────────────────┐
│ VLAN 10        │ VLAN 20        │
│ (마케팅팀)     │ (개발팀)       │  
│ PC1──PC2──PC3  │ PC4──PC5──PC6  │
└────────────────┴────────────────┘
- 각 VLAN별로 브로드캐스트 격리
- 성능 향상, 보안 강화

2. 라우터로 브로드캐스트 도메인 완전 분리:
LAN A ──Router── LAN B
- 라우터는 브로드캐스트 통과 차단
- 완전한 격리, 하지만 연결성 제한

장단점:
✅ 성능 최적화
✅ 보안 향상  
❌ DHCP 서비스 제한
❌ 네트워크 검색 기능 제한
❌ 일부 레거시 애플리케이션 동작 불가
```

## 네트워크 규모: 물리적 vs 논리적

### H/W와 S/W의 영문 표현

**H/W를 설명하는 영문은 Physical, S/W를 설명하는 영문은 Logical입니다. 2층의 식별자는 MAC 주소, 3층의 식별자는 IP입니다.**

### 이더넷의 물리적 특성

**그러면 L1에서 L2라고 말할 수 있는 Ethernet은 물리적으로 설명되는 네트워크일까 아니면 논리적으로 설명 가능한 네트워크일까? 당연히 물리적입니다.**

```
L1-L2 계층의 물리적 특성:

L1 (Physical Layer):
├─ 전기 신호 (구리선)
├─ 광 신호 (광섬유)  
├─ 전자기파 (무선)
└─ 물리적 커넥터 (RJ45, SFP 등)

L2 (Data Link Layer):
├─ MAC 주소 (하드웨어에 새김)
├─ 이더넷 프레임 (물리적 전송)
├─ 스위치 (하드웨어 장비)
└─ 케이블링 (물리적 연결)

공통 특성:
- 손으로 만질 수 있음
- 물리적 거리 제약
- 하드웨어 고장 가능
- 전기/광학적 특성 중요
```

### L3 이후의 논리적 특성

**그래서 L1에서 L2까지의 네트워크 설명은 주로 물리적인 것에 기반하여 설명합니다. 주로 전기신호와 같은 손에 잡히는 걸로 설명하는데 L3 네트워크 이후로는 논리적인 네트워크 즉, 실체가 존재하지 않습니다.**

### 논리적 네트워크의 개념

**즉 어떤 마우스나 키보드와 같이 물리적으로 실존하는 것이 아니라 어떤 개념적으로만 존재하는, 논리적인 개념입니다. 지금 화면에 보이는 마우스 포인터가 물리적으로 존재하는가? 아니다 물리적인 모니터 안에 논리적으로 존재하는 것입니다. 이런 것처럼 인터넷은 논리적입니다.**

```
물리적 vs 논리적 비교:

물리적 (Physical):
├─ 마우스 하드웨어 ← 만질 수 있음
├─ 키보드 ← 실제 존재
├─ 모니터 ← 물리적 장치
└─ 네트워크 케이블 ← 측정 가능

논리적 (Logical):  
├─ 마우스 포인터 ← 화면 속 개념
├─ 키보드 입력 이벤트 ← 소프트웨어 처리
├─ 윈도우, 아이콘 ← 그래픽 표현
└─ IP 주소, 라우팅 ← 프로그램 개념

네트워크 적용:
L1-L2: 케이블, 스위치, MAC ← 물리적
L3-L7: IP, TCP, HTTP ← 논리적
```

### Virtual과 Logical의 관계

**이 Logical, 논리적이라는 단어는 IT에서는 다른 말로도 사용하는데 그게 Virtual입니다. 그래서 이 Virtual 가상 이런 것들에 대한 IT 기술은 하나같이 아이콘이 구름 모양입니다. 즉 이것이 실체가 없고 논리적으로만 설명해야 하는 것이기 때문에 가상이라는 말이 따라다닌 것입니다.**

### 가상화 기술의 본질

**이때 이 물리적인 하드웨어를 소프트웨어로 구현할 수 있다 예를 들어 CPU 다른 말로 Machine이라고 하는데 이를 소프트웨어로 구현했으니 Virtual Machine이 되는 것입니다. 그래서 이처럼 H/W를 S/W로 구현하는 기술을 가상화 기술이라고 합니다.**

```
가상화 기술의 구체적 사례:

물리적 하드웨어 → 가상화 기술:

CPU (물리적) → Virtual CPU (논리적)
├─ 물리적: Intel i7-12700K
└─ 가상적: vCPU 4코어 할당

메모리 (물리적) → Virtual Memory (논리적)  
├─ 물리적: 32GB DDR4 RAM
└─ 가상적: VM에 8GB 할당

스토리지 (물리적) → Virtual Disk (논리적)
├─ 물리적: 1TB SSD
└─ 가상적: .vmdk 파일 100GB

네트워크 (물리적) → Virtual Network (논리적)
├─ 물리적: 1Gbps 이더넷 포트
└─ 가상적: vSwitch, VLAN

클라우드 아이콘이 구름인 이유:
- 실체가 보이지 않음 (어디 있는지 모름)
- 형태가 유동적 (언제든 변할 수 있음)
- 논리적 존재 (물리적 위치 무관)
```

### LAN과 WAN의 본질적 구분

### LAN = 물리적 네트워크

**지금까지 이런 이야기를 한 이유는 네트워크에서 가장 작은 규모는 LAN입니다. 근데 이 LAN은 보통 L1, L2의 범위를 LAN이라고 합니다. 즉, 물리적으로 설명되는 네트워크가 LAN입니다.**

```
LAN의 물리적 특성:

물리적 제약사항:
├─ 케이블 최대 길이: UTP 100m, 광케이블 수km
├─ 물리적 배치: 건물, 층, 방 단위
├─ 하드웨어 중심: 스위치, 허브, NIC
└─ 직접적 연결: Point-to-Point

관리 방식:
├─ 물리적 포트 관리
├─ MAC 주소 기반 스위칭
├─ 케이블링 설계
└─ 하드웨어 유지보수

대표 기술:
├─ 이더넷 (IEEE 802.3)
├─ Wi-Fi (IEEE 802.11)  
├─ 토큰링 (과거)
└─ FDDI (과거)
```

### WAN = 논리적 네트워크

**즉 소프트웨어적 네트워크 우리가 인터넷이라고 부르는 네트워크(L3, L4)는 WAN입니다. 이 WAN은 S/W의 범위에 존재한다, 즉 논리적인 네트워크입니다.**

```
WAN의 논리적 특성:

논리적 개념:
├─ IP 주소 체계 (설정 가능)
├─ 라우팅 테이블 (소프트웨어)
├─ 프로토콜 스택 (프로그램)
└─ 가상 연결 (논리적 경로)

관리 방식:  
├─ IP 주소 할당/관리
├─ 라우팅 프로토콜 설정
├─ 방화벽 정책 구성
└─ QoS 정책 적용

대표 기술:
├─ IP (Internet Protocol)
├─ TCP/UDP (Transport)
├─ BGP, OSPF (Routing)  
└─ VPN, MPLS (가상 연결)

물리적 기반이지만 논리적 관리:
├─ 물리적: 광케이블, 라우터 하드웨어
└─ 논리적: 라우팅, 주소 체계, 프로토콜
```

### 인터넷의 논리적 특성

**그래서 인터넷을 설명할 때 이 3계층부터는 소프트웨어적으로 존재하는 논리적 네트워크입니다.**

```
인터넷 구조의 이중성:

물리적 계층 (L1-L2):
전 세계 해저케이블 ──┐
위성 통신링크     ──┤ 
광섬유 백본       ──┤ 물리적 인프라
데이터센터        ──┘

논리적 계층 (L3-L7):
IP 주소 체계      ──┐
라우팅 프로토콜   ──┤
DNS 시스템        ──┤ 논리적 서비스
웹, 이메일        ──┘

실제 인터넷:
물리적 인프라 + 논리적 프로토콜 = 인터넷

- 물리적: 케이블, 라우터, 서버
- 논리적: TCP/IP, HTTP, DNS
- 결합: 전 세계적 네트워크 서비스
```

이렇게 **물리적 LAN과 논리적 WAN의 구분**을 이해하면, **브로드캐스트가 왜 LAN에서만 동작**하고 **라우터가 왜 브로드캐스트 도메인을 나누는지**, 그리고 **왜 인터넷 규모에서는 다른 방식의 네트워킹이 필요한지**를 근본적으로 이해할 수 있습니다!