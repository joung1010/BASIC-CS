## L2 수준에서 외워야 할 것들

### L2 스위치에 대해서

### L2 Access Switch의 기본 개념

**NIC 인터페이스 하나당 케이블 하나, 그러니까 이제 엔드 포인트와 직접 연결되는 스위치고 이때 그냥 스위치라고 하지 않고 L2 Access Switch라고 합니다.**

**OSI 7 레이어 말고 DoD에서 맨 밑 계층을 네트워크 액세스 계층이라고 합니다. 즉, PC 같은 엔드포인트하고 유선일 때 LAN 케이블에 직접 연결되는 스위치를 L2 Access Switch라고 합니다.**

```
L2 Access Switch 연결 구조:

     Link-up    24포트 L2 Access Switch
┌─────────┐      ┌─────────────────────────┐
│   PC    │      │ 1  2  3  4  5  6  7  8  │
│        ●───────●                         │ Up-link
└─────────┘      │ 9 10 11 12 13 14 15 16  │───────→ Router
                 │17 18 19 20 21 22 23 24  │
┌─────────┐      └─────────────────────────┘
│   PC    │      
│        ●───────●
└─────────┘      
   Link-down
```

### MAC 주소 기반 스위칭 동작

**이는 MAC 주소 기반으로 어떤 프레임들을 경로 판단하여 전달합니다. 이때 유선 LAN에 연결되는 단자 하나를 인터페이스 또는 포트라고 부릅니다. 그래서 이 연결 인터페이스가 총 24개가 있는 장치를 24포트 허브라고도 합니다.**

```
L2 스위치의 MAC 주소 학습 과정:

1. 초기 상태 (MAC 테이블 비어있음)
┌─────────────────────────────────────┐
│ Port │ MAC Address │ Status         │
├─────────────────────────────────────┤
│      │             │                │
└─────────────────────────────────────┘

2. PC A에서 프레임 전송 (MAC: aa:bb:cc:dd:ee:01)
┌─────────────────────────────────────┐
│ Port │ MAC Address    │ Status      │
├─────────────────────────────────────┤
│  1   │ aa:bb:cc:dd:ee:01 │ Learned │
└─────────────────────────────────────┘

3. PC B에서 프레임 전송 (MAC: aa:bb:cc:dd:ee:02)
┌─────────────────────────────────────┐
│ Port │ MAC Address    │ Status      │
├─────────────────────────────────────┤
│  1   │ aa:bb:cc:dd:ee:01 │ Active  │
│  2   │ aa:bb:cc:dd:ee:02 │ Active  │
└─────────────────────────────────────┘

동작 방식:
- 알려진 MAC → 해당 포트로만 전송
- 모르는 MAC → 모든 포트로 플러딩(Flooding)
```

### Link 상태와 LED 표시

**참고로 랜 케이블이든 랜 카드의 인터페이스 쪽을 보면 LED가 붙어 있는데 이때 LED 색이 주황색이면 충돌이 발생했다는 의미입니다. 녹색에 불이 깜빡거리면 잘 동작하고 있다는 의미입니다.**

### Link 상태 구분

**근데 이때 녹색불이 깜빡거리는 연결이 잘된 상태를 Link-up이라고 합니다. 반대인 주황색 불은 Link-down입니다.**

```
LED 상태별 의미:

녹색 LED (Link-up):
├─ 지속적 녹색: 물리적 연결 성공, 데이터 없음
├─ 깜빡이는 녹색: 정상 연결 + 데이터 송수신 중
└─ 의미: 케이블이 정상 연결되었다

주황색/빨간색 LED (Link-down):
├─ 지속적 주황색: 물리적 연결 문제
├─ 깜빡이는 주황색: 충돌 또는 오류 발생
└─ 의미: 케이블이 정상 연결되지 않았다

기타 상태:
├─ LED 꺼짐: 전원 없음 또는 케이블 연결 안됨
├─ 노란색: 100Mbps 연결 (낮은 속도)
└─ 녹색: 1Gbps 연결 (고속)
```

### Up-link의 개념

**이때 L2 스위치와 연결된 라우터의 선을 Up-Link라고 부릅니다.**

```
Up-link vs Down-link:

Down-link (하향 연결):
상위 장비 → 하위 장비
Router → L2 Switch → PC

Up-link (상향 연결):  
하위 장비 → 상위 장비
PC → L2 Switch → Router

특징:
- Up-link는 보통 고속 포트 사용
- 다중 연결로 이중화 구성
- 트래픽 집중 구간
```

### 계층적 스위치 구조

**보통 PC 한 대는 L2 Access Switch를 만나고 거기서 다른 스위치를 만나고 최종적으로 라우터로 가게 됩니다.**

### 3계층 네트워크 구조

```
계층적 네트워크 구조:

                    ┌─────────┐
                    │ Router  │ ← Core Layer
                    │   L3    │   (건물당 1개)
                    └────┬────┘
                         │ Up-link
                    ┌────▼────┐
                    │L2 Dist  │ ← Distribution Layer
                    │ Switch  │   (층마다 1개)
                    └────┬────┘
              ┌──────────┼──────────┐
              │          │          │
         ┌────▼────┐┌────▼────┐┌────▼────┐
         │L2 Access││L2 Access││L2 Access│ ← Access Layer
         │ Switch  ││ Switch  ││ Switch  │   (방마다 1개)
         └────┬────┘└────┬────┘└────┬────┘
              │          │          │
          ┌───▼───┐  ┌───▼───┐  ┌───▼───┐
          │  PC   │  │  PC   │  │  PC   │ ← End Devices
          └───────┘  └───────┘  └───────┘
```

### L2 Distribution Switch의 역할

**이때 L2 Access Switch는 엔드포인트인 PC랑 직접 붙는데 이런 L2 스위치들을 위한 고성능 스위치를 L2 Distribution Switch라고 합니다.**

**쉽게 생각하면 L2 Access 스위치를 위한 스위치로써 L2 Distribution Switch는 VLAN(Virtual LAN) 기능을 제공하는 것이 일반적입니다.**

```
L2 Distribution Switch의 주요 기능:

트래픽 집약:
┌─────────────────────────────────────┐
│ 여러 Access Switch의 트래픽을       │
│ 하나로 모아서 상위로 전달           │
└─────────────────────────────────────┘

VLAN 관리:
┌─────────────────────────────────────┐
│ • 부서별 네트워크 분리              │
│ • 보안 정책 적용                    │
│ • 브로드캐스트 도메인 제어          │
└─────────────────────────────────────┘

고성능 처리:
┌─────────────────────────────────────┐
│ • 높은 포트 밀도                    │
│ • 고속 백플레인                     │
│ • QoS (Quality of Service) 지원    │
└─────────────────────────────────────┘
```

### VLAN 기능의 실제 적용

```
VLAN 구성 예시 (회사 환경):

L2 Distribution Switch
├─ VLAN 10: 경영진 (192.168.10.x)
├─ VLAN 20: 개발팀 (192.168.20.x)  
├─ VLAN 30: 마케팅팀 (192.168.30.x)
└─ VLAN 99: 관리용 (192.168.99.x)

각 Access Switch에서:
포트 1-8  → VLAN 10 (경영진)
포트 9-16 → VLAN 20 (개발팀)
포트 17-24 → VLAN 30 (마케팅팀)

보안 효과:
- 부서간 트래픽 격리
- 접근 제어 정책 적용
- 네트워크 성능 최적화
```

### 실제 건물 배치 사례

**그래서 보통 한 건물에서 방 하나 사무실 하나마다 L2 Access Switch가 있고 그 스위치들이 모여서 디스트리뷰션을 만나서 라우터로 나갑니다. 보통은 디스트리뷰션 스위치는 건물 층마다 존재합니다. 이때 라우터는 건물당 1개 정도입니다.**

### 건물별 네트워크 구성

```
실제 건물 네트워크 배치:

5층 건물 예시:

5F: 임원실
├─ L2 Access Switch (임원실)
├─ L2 Access Switch (회의실)
└─ L2 Distribution Switch (5층 통합) ─┐

4F: 개발팀                              │
├─ L2 Access Switch (개발1팀)           │
├─ L2 Access Switch (개발2팀)           │
└─ L2 Distribution Switch (4층 통합) ─┤

3F: 마케팅팀                            │
├─ L2 Access Switch (마케팅팀)          │ Router
├─ L2 Access Switch (디자인팀)          │ (건물 전체)
└─ L2 Distribution Switch (3층 통합) ─┤

2F: 영업팀                              │
├─ L2 Access Switch (영업1팀)           │
├─ L2 Access Switch (영업2팀)           │
└─ L2 Distribution Switch (2층 통합) ─┤

1F: 로비/관리                           │
├─ L2 Access Switch (접수실)            │
├─ L2 Access Switch (관리실)            │
└─ L2 Distribution Switch (1층 통합) ─┘
```

### 각 계층별 장비 특성

```
장비별 특성 비교:

L2 Access Switch:
├─ 포트 수: 8-48포트
├─ 속도: 1Gbps 포트
├─ 기능: 기본 스위칭, PoE 지원
├─ 가격: 저렴
└─ 위치: 각 사무실, 회의실

L2 Distribution Switch:  
├─ 포트 수: 24-48포트 (+ SFP 슬롯)
├─ 속도: 1Gbps + 10Gbps Up-link
├─ 기능: VLAN, QoS, 스택킹
├─ 가격: 중간
└─ 위치: 각 층 통신실

Router (L3):
├─ 포트 수: 상대적으로 적음
├─ 속도: 10Gbps 이상
├─ 기능: 라우팅, 방화벽, VPN
├─ 가격: 고가
└─ 위치: 건물 중앙 통신실
```

**L2 Distribution Switch는 L2 Access Switch들을 모아서 스위칭하는 것입니다.**

이런 **계층적 구조를 통해 네트워크 관리의 효율성을 높이고, 트래픽을 체계적으로 제어**할 수 있으며, **장애 발생 시 영향 범위를 최소화**할 수 있습니다.

### PC/노트북의 LAN 단자 vs L2 Access Switch

### PC/노트북의 LAN 단자 = NIC (Network Interface Card)

```
PC/노트북 내부:
┌─────────────────────────┐
│        PC/노트북        │
│  ┌─────────────────┐    │
│  │      CPU       │    │
│  │   메모리, 등    │    │
│  │                │    │
│  │  ┌───────────┐ │    │
│  │  │   NIC     │●│────┼── 유선 LAN 단자 (1개 포트)
│  │  │(랜카드)   │ │    │
│  │  └───────────┘ │    │
│  └─────────────────┘    │
└─────────────────────────┘

특징:
- End-point (단말기)
- 1개의 포트만 존재
- 데이터를 생성/소비하는 주체
- 스위칭 기능 없음
```

### L2 Access Switch = 네트워크 인프라 장비

```
L2 Access Switch:
┌─────────────────────────────────────┐
│        L2 Access Switch             │
│  1  2  3  4  5  6  7  8  9  10 11 12│
│ ●  ●  ●  ●  ●  ●  ●  ●  ●  ●  ●  ● │ ← 24개 포트
│ 13 14 15 16 17 18 19 20 21 22 23 24 │
│ ●  ●  ●  ●  ●  ●  ●  ●  ●  ●  ●  ● │
└─────────────────────────────────────┘

특징:
- 네트워크 인프라 장비
- 다수의 포트 (8~48개)
- 스위칭 기능 수행
- MAC 테이블 관리
- 데이터 중계 역할
```

## 핵심 차이점

### 1. 역할의 차이

```
PC/노트북의 NIC:
- 역할: 네트워크 사용자 (End-point)
- 기능: 데이터 송수신만
- 예시: "나는 웹페이지를 요청한다"

L2 Access Switch:
- 역할: 네트워크 인프라 (Infrastructure)
- 기능: 데이터 중계 및 스위칭
- 예시: "PC A의 데이터를 PC B로 전달한다"
```

### 2. 포트 수의 차이

```
PC/노트북: 1개 포트
├─ 자신만을 위한 연결
└─ 다른 기기와 직접 연결 불가

L2 Access Switch: 다수 포트 (8~48개)
├─ 여러 기기를 동시 연결
├─ 기기들 간의 통신 중계
└─ 네트워크 확장 기능
```

### 3. 실제 연결 구조

```
올바른 연결:
PC ──(케이블)── L2 Access Switch ──(케이블)── 다른 PC
│                      │
NIC              스위칭 기능 수행
(1포트)          (다수 포트)

잘못된 이해:
PC = L2 Access Switch (X)
```

## 정확한 네트워크 용어

### Interface vs Switch

Interface (인터페이스):
- PC의 랜 단자 = 네트워크 인터페이스
- 연결점 역할
- 데이터 입출력 지점

Switch (스위치):
- 여러 인터페이스를 가진 장비
- 스위칭 기능 수행
- 네트워크 확장 및 중계

### 비유로 이해하기

```
도로 시스템 비유:

PC의 NIC = 집 앞 진입로
├─ 1개의 연결점
├─ 집(PC)과 도로(네트워크) 연결
└─ 교통 통제 기능 없음

L2 Access Switch = 교차로
├─ 여러 방향으로 연결
├─ 교통(데이터) 통제 및 방향 지시
└─ 도로 인프라의 일부
```